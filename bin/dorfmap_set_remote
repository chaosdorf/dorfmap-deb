#!/bin/sh

case "${1}" in
feedback1)

cd /tmp/feedback1
( cat 1 2 3 4 5 6 7 8 9 10 11 12 13; echo "0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n1\n0" ) | si2c-bitwrite 8 11

;;
feedback2)

cd /tmp/feedback2
( echo $(( ( $(cat bin1) << 1 ) | ( $( cat bin3) << 3 ) | ( $(cat bin5) << 5 ) | ( $(cat bin6) << 6 ) ));
cat pwm0 pwm1 pwm2; echo "0\n6" ) | si2c-bytewrite 8 11
;;

feedback3)
cd /tmp/feedback3
( cat 1 2 3 4 5 6 7 8 9 10 11 12; echo "0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n1\n1\n1" ) | si2c-bitwrite 8 11

;;
feedback5)

cd /tmp/feedback5
( cat 1 2 3 4 5 6 7 8; echo "0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n1\n0\n0\n1" ) | si2c-bitwrite 8 11

;;
feedback6)

cd /tmp/feedback6
( echo $(( ( $(cat bin0) ) | ( $(cat bin1) << 1 ) | ( $( cat bin3) << 3 ) | ( $(cat bin5) << 5 ) | ( $(cat bin6) << 6 ) | ( $(cat bin7) << 7 ) ));
cat pwm0 pwm1 pwm2; echo "0\n10" ) | si2c-bytewrite 8 11

;;
donationprint1)

cd /tmp/donationprint1
(echo "$(cat /etc/dorfmap/pw.avrshift)"; cat 1 2 3 4 5 6 7 8 9 10 11 12 13; echo "0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0" ) | nc -w 4 donationprint 1337

;;
hyperion1)

cd /tmp/hyperion1
if [ "$(cat "$2")" = 1 ]; then
	echo "$(cat /etc/dorfmap/pw.powerswitch)" on "$2" | nc -w 4 hyperion 1338
else
	echo "$(cat /etc/dorfmap/pw.powerswitch)" off "$2" | nc -w 4 hyperion 1338
fi

;;
esac
